{% extends 'base.html.twig' %}

{% block title %}Lesson index{% endblock %}

{% block body %}
    <h1>Lesson index</h1>

        <div class="box pt-4">
        {% for lesson in lessons %}
            <div class="card bg-light mb-3" style="max-width: 20rem;">
                <div class="card-header">
                {% for tag in lesson.tag %}
                    <a class="badge badge-pill badge-secondary resetlink" href="{{path("bytag",{name: tag.tagName})}}">{{tag.tagName}}</a>
                {% endfor %}
                </div>
                <div class="card-body">
                <h4 class="card-title"> {{ lesson.title }} </h4>
                 <p class="card-text"> {{ lesson.content|striptags|u.truncate(300, '...') }}</p>
                 <button type="button" class="btn btn-primary"><a class="resetlink" href="{{ path('lesson_show', {'id': lesson.id})  }}">En savoir plus</a></button>
                   {% if app.user == lesson.user %}
                    <button type="button" class="btn btn-secondary"><a class="resetlink"href="{{ path('lesson_edit', {'id': lesson.id})  }}">Modifier</a></button>
                   {% endif  %}
                <br> Crée le : {{ lesson.createdAt ? lesson.createdAt|date('Y-m-d H:i:s') : '' }}
                <br>Modifié le : {{ lesson.updatedAt ? lesson.updatedAt|date('Y-m-d H:i:s') : '' }}
                <br>Par : {{ lesson.user }}
                </div>
            </div>
        {% else %}
                <td colspan="6">La matiere n'existe pas ou elle n as pas encore de cours</td>
        {% endfor %}
        </div>

{% endblock %}

